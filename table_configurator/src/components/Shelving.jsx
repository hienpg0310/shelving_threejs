/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
Command: npx gltfjsx@6.1.4 public/models/Shelving.gltf
*/

import React, { useEffect, useRef } from 'react'
import { useGLTF } from '@react-three/drei'
import { ConfiguratorProvider, useConfigurator } from '../contexts/Configurator';

import { useFrame } from "@react-three/fiber";
import * as Three from "three";
import { Vector3 } from "three";

const ANIM_SPEED = 12;


export function Shelving(props) {
  const { nodes, materials } = useGLTF('./models/shelving.gltf')

  const {shelfColor, shelfWidth, shelfHeight, shelfDetph} = useConfigurator();
  const shelf = useRef();

  useEffect(()=>{
    materials.Plate.color = new Three.Color(shelfColor); }, [shelfColor]); // chinh mau chan ban

    useFrame((_state, delta) => {
      const shelfWidthScale = shelfWidth / 100; 
      const shelfHeightScale = shelfHeight / 100;
      const shelfDetphScale = shelfDetph / 100;
      // const targetScale = new Vector3(shelfWidthScale, shelfHeightScale, shelfDetphScale); 
  
      shelf.current.scale.set(shelfWidthScale, shelfHeightScale, shelfDetphScale);
    });
    

  return (
    <group {...props} dispose={null}>
      <mesh geometry={nodes.Cube.geometry} material={materials.Plate} scale={[1, 1.48, 0.3]} ref={shelf} />
    </group>
  )
}

useGLTF.preload('./models/shelving.gltf')
